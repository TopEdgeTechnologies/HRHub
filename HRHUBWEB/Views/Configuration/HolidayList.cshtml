@model HRHUBAPI.Models.Holiday



    <!--Page header-->
    <div class="page-header d-xl-flex d-block">
        <div class="page-leftheader">
            <div class="page-title">Holidays</div>
        </div>
        <div class="page-rightheader ms-md-auto">
            <div class="d-flex align-items-end flex-wrap my-auto end-content breadcrumb-end">
                <div class="btn-list">
                @if (Convert.ToBoolean(ViewBag.IsNew))
                {
                    <a href="#" onclick="AddNewHoliday()" class="btn btn-primary me-3" data-bs-toggle="modal" data-bs-target="#holidaymodal">Add Holiday</a>
                }
                
                   
                    <button class="btn btn-light" data-bs-toggle="tooltip" data-bs-placement="top" title="E-mail"> <i class="feather feather-mail"></i> </button>
                    <button class="btn btn-light" data-bs-placement="top" data-bs-toggle="tooltip" title="Contact"> <i class="feather feather-phone-call"></i> </button>
                    <button class="btn btn-primary" data-bs-placement="top" data-bs-toggle="tooltip" title="Info"> <i class="feather feather-info"></i> </button>
                </div>
            </div>
        </div>
    </div>
    <!--End Page header-->
    <!-- Row -->
    <div class="row">
        <div class="col-xl-12 col-md-12 col-lg-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-12 col-lg-3">
                            <div class="form-group">
                                <label class="form-label">Select Date:</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text">
                                            <i class="feather feather-calendar"></i>
                                        </div>
                                    </div><input class="form-control fc-datepicker" placeholder="DD-MM-YYYY" type="text">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-3">
                            <div class="form-group">
                                <label class="form-label">Month:</label>
                                <select name="attendance" class="form-control custom-select select2" data-placeholder="Select Month">
                                    <option label="Select Month"></option>
                                    <option value="1" selected>January</option>
                                    <option value="2">February</option>
                                    <option value="3">March</option>
                                    <option value="4">April</option>
                                    <option value="5">May</option>
                                    <option value="6">June</option>
                                    <option value="7">July</option>
                                    <option value="8">August</option>
                                    <option value="9">September</option>
                                    <option value="10">October</option>
                                    <option value="11">November</option>
                                    <option value="12">December</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-3">
                            <div class="form-group">
                                <label class="form-label">Year:</label>
                                <select name="attendance" class="form-control custom-select select2" data-placeholder="Select Year">
                                    <option label="Select Year"></option>
                                    <option value="1">2024</option>
                                    <option value="2">2023</option>
                                    <option value="3">2022</option>
                                    <option value="4" selected>2021</option>
                                    <option value="5">2020</option>
                                    <option value="6">2019</option>
                                    <option value="7">2018</option>
                                    <option value="8">2017</option>
                                    <option value="9">2016</option>
                                    <option value="10">2015</option>
                                    <option value="11">2014</option>
                                    <option value="12">2013</option>
                                    <option value="13">2012</option>
                                    <option value="14">2011</option>
                                    <option value="15">2019</option>
                                    <option value="16">2010</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-3">
                            <div class="form-group mt-5">
                                <a href="javascript:void(0);" class="btn btn-primary btn-block">Search</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Row-->
    <!-- Row -->
    <div class="row">
        <div class="col-md-12 col-lg-12 col-xl-8">
            <div class="card">
                <div class="card-header  border-0">
                    <h4 class="card-title">Holidays Lists</h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table  table-vcenter text-nowrap table-bordered border-bottom" id="hr-holiday">
                            <thead>
                                <tr>
                                    <th class="border-bottom-0 w-5">No</th>
                                    <th class="border-bottom-0 w-5">Day</th>
                                    <th class="border-bottom-0">Date</th>
                                    <th class="border-bottom-0">Holidays</th>
                                    <th class="border-bottom-0">Actions</th>
                                </tr>
                            </thead>
                            <tbody>


                            @{
                                int count = 1;
                                foreach (var item in Model.ListOfHolidays)
                                {

                                    <tr>
                                        <td>@count</td>
                                        <td>@item.DayName</td>
                                        <td>@item.HolidayDate</td>
                                        <td class="font-weight-semibold">@item.Title</td>
                                        <td>


                                            @if (Convert.ToBoolean(ViewBag.IsEdit))
                                            {
                                              

                                                <a onclick="editrecord(@item.HolidayId)" class="btn btn-primary btn-icon btn-sm" href="javascript:void(0);" data-bs-toggle="modal" data-bs-target="#holidaymodal">
                                                    <i class="feather feather-edit" data-bs-toggle="tooltip" data-original-title="View/Edit"></i>
                                                </a>


                                            } @if (Convert.ToBoolean(ViewBag.IsDelete))
                                            {
                                              
                                                <a onclick="confirmation(@item.HolidayId)" class="btn btn-danger btn-icon btn-sm" data-bs-toggle="tooltip" data-original-title="Delete"><i class="feather feather-trash-2"></i></a>
                                            }
                                        </td>
                                    </tr>
                                    count++;
                                }                                                           
                             }





                               
                                                          
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12 col-lg-12 col-xl-4">
            <div class="card">
                <div class="card-body">
                    <div class="holiday-calender">
                        <div id="calendar1"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Row-->
<!-- Holiday Modal -->
@using (@Html.BeginForm("DepartmentCreateOrUpdate", "Configuration", FormMethod.Post, new { @id = "myform", enctype = "multipart/form-data" }))
{
<div class="modal fade" id="holidaymodal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add Holidays</h5>
                <button class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Select Date</label>
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <div class="input-group-text">
                                <i class="feather feather-calendar"></i>
                            </div>
                        </div><input type="date" id="HolidayDate" name="HolidayDate" class="form-control" data-bs-toggle="modaldatepicker">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Enter Occasion</label>
                    <input class="form-control" type="text" id="Title" name="Title" placeholder="Cccasion title">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-primary" data-bs-dismiss="modal">Close</button>
                <button class="btn btn-primary">Add</button>
            </div>
        </div>
    </div>
</div>
}
<!-- Holiday Modal -->




<script src="/assets/plugins/jquery/jquery.min.js"></script>

<script src="/assets/plugins/fullcalendar/fullcalendar.min.js"></script>

@*<script src="/assets/js/hr/hr-holiday.js"></script>*@

@section scripts{
        <script>

        $(document).ready(function () {
            $('#hr-holiday').DataTable();
     
        });


        /*--Add Holiday Code--*/
        function AddHoliday() {

            $("#holidaymodal").modal('show');
            $("#Title").val(0)
            $("#HolidayDate").val('')
       


        }












        /*---- Full Calendar -----*/
        document.addEventListener('DOMContentLoaded', function () {
            var calendarEl = document.getElementById('calendar1');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                headerToolbar: {
                    left: 'prev',
                    center: 'title',
                    right: 'next'
                },
                //navLinks: true, // can click day/week names to navigate views
                businessHours: true, // display business hours
                editable: true,
                selectable: true,
                selectMirror: true,
                droppable: true, // this allows things to be dropped onto the calendar
                drop: function (arg) {
                    // is the "remove after drop" checkbox checked?
                    if (document.getElementById('drop-remove').checked) {
                        // if so, remove the element from the "Draggable Events" list
                        arg.draggedEl.parentNode.removeChild(arg.draggedEl);
                    }
                },
                //select: function (arg) {
                //    var title = prompt('Event Title:');
                //    if (title) {
                //        calendar.addEvent({
                //            title: title,
                //            start: arg.start,
                //            end: arg.end,
                //            allDay: arg.allDay
                //        })
                //    }
                //    calendar.unselect()
                //},
                eventClick: function (arg) {
                    if (confirm('Are you sure you want to delete this event?')) {
                        arg.event.remove()
                    }
                },
                editable: true,
                dayMaxEvents: true, // allow "more" link when too many events
                eventRender: function (event, element) {
                    debugger;
                    if ((event.description).toString() == "Halfday") {
                        element.find(".fc-event-time").after($("<span class=\"fc-event-icons\"></span>").html("<i class='fe fe-view'></i> "));
                    }
                },
                events: [
                    {
                        title: 'Rest Day',
                        start: '2023-05-14',
                        color: 'rgba(255, 173, 0, 0.1)',
                    },
                    {
                        title: 'EID',
                        start: '2023-05-26',
                        color: 'rgba(255, 173, 0, 0.1)',
                    },
                ]
            });
            calendar.render();
        });

    </script>                
      }