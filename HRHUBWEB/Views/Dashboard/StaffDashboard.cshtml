
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    canvas {
        max-width: 600px;
        margin: 20px auto;
    }
</style>

<!--Apply Leaves Modal -->
<div class="modal fade" id="applyleaves">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Apply Leaves</h5>
				<button  class="btn-close" data-bs-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="leave-types">
					<div class="form-group">
						
						<input type="hidden" id="LeaveId" name="LeaveId" />
						<label class="form-label">Leaves Dates</label>
						<select name="projects"  class="form-control custom-select select2" id="daterange-categories">
							<option value="single">Single Leaves</option>
							<option value="multiple">Multiple Leaves</option>
						</select>
					</div>
					<div class="leave-content active" id="single">
                        <div class="row form-group">
                            <label class="form-label">Date Range:</label>
                            <div class="col-xl-12 col-md-12 col-lg-12" id="singledate">
                                <div class="input-group">
									<input id="StartDate" name="StartDate" type="date" class="form-control " placeholder="select date" />
                                </div>
                            </div>
                            <div class="col-xl-6 col-md-12 col-lg-12">
                                <div class="input-group" hidden id="MultipleDate">
									<input id="EndDate" name="EndDate" type="date" class="form-control " placeholder="select date" />
                                </div>
                            </div>
                        </div>
                    </div>
					<div class="form-group">
						<label class="form-label">Leaves Types</label>						
						<select id="LeaveTypeId" class="form-control">

						</select>	
					</div>
					<div class="form-group">
						<label class="form-label">Reason:</label>
						<textarea id="LeaveSubject" name="LeaveSubject" class="form-control" rows="2" placeholder="Some text here..."></textarea>
					</div>
					<div class="row form-group leavecheckbox">
						<div class="col-xl-6 col-md-12 col-lg-12 mt-2 half">
							<label class="custom-control custom-checkbox chkbox">
								<input type="checkbox" id="MarkAsHalfLeave" name="MarkAsHalfLeave" class="custom-control-input">
								<span class="custom-control-label">Half Leave</span>
							</label>
						</div>
						<div class="col-xl-6 col-md-12 col-lg-12 mt-2 short">
							<label class="custom-control custom-checkbox chkbox">
								<input type="checkbox" id="MarkAsShortLeave" name="MarkAsShortLeave" class="custom-control-input">
								<span class="custom-control-label">Short Leave</span>
							</label>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<div class="">
					<label class="mb-0 font-weight-semibold">Selected Days:</label>
					<span class="badge badge-success badge-pill ms-2" id="SelectedDays">0</span>
				</div>
				<div class="ms-auto">
					<button type="button" onclick="PostLeaveApplication()" class="btn btn-primary">Submit</button>
					<a  href="javascript:void(0);" class="btn btn-outline-primary" data-bs-dismiss="modal">Close</a>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- End Apply Leaves Modal  -->

	<!--Page header-->
	<div class="page-header d-xl-flex d-block">
		<div class="page-leftheader">
			<div class="page-title">Staff<span class="font-weight-normal text-muted ms-2">Dashboard</span></div>
		</div>
		<div class="page-rightheader ms-md-auto">
			<div class="d-flex align-items-end flex-wrap my-auto end-content breadcrumb-end">
		<a onclick="openApplyLeaveModal()" href="javascript:void(0);" class="btn btn-primary me-3 mt-3 mt-lg-0 mb-3 mb-md-0" data-bs-toggle="modal">Apply Leaves</a> @*data-bs-target="#applyleaves"*@
				<div class="d-flex">
					<div class="header-datepicker me-3">
						<div class="input-group">
							<div class="input-group-prepend">
								<div class="input-group-text">
									<i class="feather feather-calendar"></i>
								</div>
							</div><input id="DashboardCalender" class="form-control fc-datepicker" placeholder="19 Feb 2020" type="text">
						</div>
					</div>
					<div class="header-datepicker me-3">
						<div class="input-group">
							<div class="input-group-prepend">
								<div class="input-group-text">
									<i class="feather feather-clock"></i>
								</div><!-- input-group-text -->
							</div><!-- input-group-prepend -->
							<input id="tpBasic" type="text" placeholder="09:30:15 am" class="form-control input-small">
							<button id="toggleClockButton" type="button" class="btn btn-primary" data-bs-toggle="button" aria-pressed="false">am/pm</button>
						</div>
					</div><!-- wd-150 -->
				</div>
				<div class="d-lg-flex d-block">
					<div class="btn-list">
						<button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#clockinmodal">Clock In</button>
						<button class="btn btn-light" data-bs-toggle="tooltip" data-bs-placement="top" title="E-mail"> <i class="feather feather-mail"></i> </button>
						<button class="btn btn-light" data-bs-placement="top" data-bs-toggle="tooltip" title="Contact"> <i class="feather feather-phone-call"></i> </button>
						<button class="btn btn-primary" data-bs-placement="top" data-bs-toggle="tooltip" title="Info"> <i class="feather feather-info"></i> </button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!--End Page header-->
	<!--Row-->
	<div class="row">
		<div class="col-xl-3 col-lg-6 col-md-12">
			<div class="card">
				<div class="card-body">
					<div class="row">
						<div class="col-7">
							<div class="mt-0 text-start">
								<h5 class="">YTD Present</h5>
								<h3 id="YTDPresentCount" class="mb-0 mt-auto text-primary">162</h3>
							</div>
						</div>
						<div class="col-5">
							<div class="icon1 bg-primary my-auto  float-end"> <i class=" IconCenterAlignment feather feather-box"></i> </div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-xl-3 col-lg-6 col-md-12">
			<div class="card">
				<div class="card-body">
					<div class="row">
						<div class="col-7">
							<div class="mt-0 text-start">
								<h5 class="">YTD Leave</h5>
								<h3 id="MTDPaidLeaveCount" class="mb-0 mt-auto text-secondary">12</h3>
							</div>
						</div>
						<div class="col-5">
							<div class="icon1 bg-secondary my-auto  float-end"> <i class="IconCenterAlignment feather feather-briefcase"></i> </div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-xl-3 col-lg-6 col-md-12">
			<div class="card">
				<div class="card-body">
					<div class="row">
						<div class="col-7">
							<div class="mt-0 text-start">
								<h5 class="">YTD Absent</h5>
								<h3 id="TotalAbsentCount" class="mb-0 mt-auto text-danger">0</h3>
							</div>
						</div>
						<div class="col-5">
						<div class="icon1 bg-danger my-auto  float-end"> <i class="IconCenterAlignment feather feather-award"></i> </div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-xl-3 col-lg-6 col-md-12">
			<div class="card">
				<div class="card-body">
					<div class="row">
						<div class="col-7">
							<div class="mt-0 text-start">
								<h5 class="">YTD Projects</h5>
								<h3 class="mb-0 mt-auto text-success">0</h3>
							</div>
						</div>
						<div class="col-5">
							<div class="icon1 bg-success my-auto  float-end"> <i class="IconCenterAlignment feather feather-file-text"></i> </div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- /Row-->
	<!--Row-->
	<div class="row">
		<div class="col-xl-8 col-md-12 col-lg-12">
			<div class="col-sm-12 col-xl-12">
				<div class="card">
					<div class="card-header border-bottom-0"> 
						<div class="card-title">Vertical Stacked Bar Chart</div> 
						<div class="card-options col-md-4">
							<div class="form-group">
								<div class="input-group">
									<div class="input-group-prepend">
										<div class="input-group-text">
											<i class="feather feather-calendar"></i>
										</div>
									</div><input id="chartDate" class="form-control fc-datepicker " type="text">
								</div>
							</div>
						</div>
					</div>
					<div class="card-body"> 
						<div class="chartjs-wrapper-demo">
							<canvas id="chartStackedAttendance" class="h-300"></canvas>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-xl-4 col-lg-12 col-md-12">
			<div class="card">
				<div class="card-header border-0">
					<h4 class="card-title">Up Coming Holidays</h4>
				</div>
				<div id="holidaysCard" class="card-body mt-1">

				</div>
			</div>
			</div>
	</div>
	<div class="row">
		<div class="col-xl-3 col-lg-12 col-md-12">
			<div class="card">
				<div class="p-0">
					<div class="card-header border-0">
						<h4 class="card-title">Calendar</h4>
					</div>
					<div class="calendar p-4 pt-0"></div>
				</div>
			</div>
		</div>

		<div class="col-xl-4 col-md-12 col-lg-12">
			<div class="card">
				<div class="card-header  border-0">
					<h4 class="card-title">Recent Activity</h4>
				</div>
				<div class="pt-4">
					<div class="table-responsive">
						<table class="table transaction-table mb-0 text-nowrap">
							<tbody>
								<tr class="border-bottom">
									<td class="d-flex ps-6">
										<span class="bg-pink pink-border brround d-block me-5 mt-1 h-5 w-5"></span>
										<div class="my-auto">
											<span class="mb-1 font-weight-semibold fs-17">You Late to day</span>
											<div class="clearfix"></div>
											<small class="text-muted fs-14">Your office intime is 9:42</small>
											<div class="clearfix"></div>
											<small class="text-muted fs-14">Late time 14min</small>
										</div>
									</td>
									<td class="text-end pe-6">
										<a class="text-muted d-block fs-16" href="javascript:void(0);">Just Now</a>
									</td>
								</tr>
								<tr class="border-bottom">
									<td class="d-flex ps-6">
										<span class="bg-warning warning-border brround d-block me-5 mt-1 h-5 w-5"></span>
										<div class="my-auto">
											<span class="mb-1 font-weight-semibold fs-17">Below for those interested</span>
											<div class="clearfix"></div>
											<small class="text-muted fs-14">Undoubtable source</small>
										</div>
									</td>
									<td class="text-end pe-6">
										<a class="text-muted d-block fs-16" href="javascript:void(0);">1 Hour ago</a>
									</td>
								</tr>
								<tr class="border-bottom">
									<td class="d-flex ps-6">
										<span class="bg-primary primary-border brround d-block me-5 mt-1 h-5 w-5"></span>
										<div class="my-auto">
											<span class="mb-1 font-weight-semibold fs-17">Success! your Lunch Time</span>
											<div class="clearfix"></div>
											<small class="text-muted fs-14">Lunch time 1:30 To 2:30</small>
										</div>
									</td>
									<td class="text-end pe-6">
										<a class="text-muted d-block fs-16" href="javascript:void(0);">4 hours ago</a>
									</td>
								</tr>
								<tr class="border-bottom">
									<td class="d-flex ps-6">
										<span class="bg-success success-border brround d-block me-5 mt-1 h-5 w-5"></span>
										<div class="my-auto">
											<span class="mb-1 font-weight-semibold fs-17">Many desktops Publishing The</span>
											<div class="clearfix"></div>
											<span class="mb-1 font-weight-semibold fs-17"> versions are evolved</span>
											<div class="clearfix"></div>
											<small class="text-muted fs-14">Page editors now use...</small>
											<div class="clearfix"></div>
											<small class="text-muted fs-14">Late time 14min</small>
										</div>
									</td>
									<td class="text-end pe-6">
										<a class="text-muted d-block fs-16" href="javascript:void(0);">5 hours ago</a>
									</td>
								</tr>
								<tr>
									<td class="d-flex ps-6">
										<span class="bg-orange orange-border brround d-block me-5 mt-1 h-5 w-5"></span>
										<div class="my-auto">
											<span class="mb-1 font-weight-semibold fs-17">Below for those interested</span>
											<div class="clearfix"></div>
											<small class="text-muted fs-14">Birthday on Feb 16</small>
										</div>
									</td>
									<td class="text-end pe-6">
										<a class="text-muted d-block fs-16" href="javascript:void(0);">11 Jan 2020</a>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
			
		<div class="col-xl-5 col-lg-12 col-md-12">
			<div class="card">
				<div class="card-header border-0">
					<h4 class="card-title">Leave Balance</h4>
					<div class="card-options me-3">
						<a href="" class="btn btn-block btn-primary pe-3 ps-3">Apply For Leave</a>
					</div>
				</div>
				<div class="table-responsive leave_table fs-13 mt-5">
					<table class="table mb-0 text-nowrap">
						<thead class="border-top">
							<tr>
								<th class="text-start">Balance</th>
								<th class="text-start">Used</th>
								<th class="text-center">Available</th>
								<th class="text-center">Allowance</th>
							</tr>
						</thead>
						<tbody>
							<tr class="border-bottom fs-15">
								<td class="text-center d-flex"><span class="bg-primary brround d-block me-3 mt-1 h-3 w-3"></span><span class="font-weight-semibold fs-15">Vacation</span></td>
								<td class="font-weight-semibold fs-15">16.5</td>
								<td class="text-center text-muted fs-15">3.5</td>
								<td class="text-center text-muted">20</td>
							</tr>
							<tr class="border-bottom fs-15">
								<td class="text-center d-flex"><span class="bg-orange brround d-block me-3 mt-1 h-3 w-3"></span><span class="font-weight-semibold fs-15">Sick Leave</span></td>
								<td class="font-weight-semibold">4.5</td>
								<td class="text-center text-muted">16</td>
								<td class="text-center text-muted">20</td>
							</tr>
							<tr class="border-bottom fs-15">
								<td class="text-center d-flex"><span class="bg-warning brround d-block me-3 mt-1 h-3 w-3"></span><span class="font-weight-semibold fs-15">Unpaid leave</span></td>
								<td class="font-weight-semibold">5</td>
								<td class="text-center text-muted">360</td>
								<td class="text-center text-muted">365</td>
							</tr>
							<tr class="border-bottom fs-15">
								<td class="text-center d-flex"><span class="bg-info brround d-block me-3 mt-1 h-3 w-3"></span><span class="font-weight-semibold fs-15">Work from Home</span></td>
								<td class="font-weight-semibold">8</td>
								<td class="text-center text-muted">22</td>
								<td class="text-center text-muted">30</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="row mb-0 pb-0">
					<div class="col-4 text-center py-5 border-end">
						<h5>Vacation</h5>
						<div class="justify-content-center text-center d-flex my-auto"><span class="text-primary fs-20 font-weight-semibold">8 <span class="my-auto fs-14 font-weight-normal text-light">/</span> 16</span></div>
					</div>
					<div class="col-4 text-center py-5 border-end">
						<h5>Sick leave</h5>
						<div class="justify-content-center text-center d-flex my-auto"><span class="text-danger fs-20 font-weight-semibold">4.5 <span class="my-auto fs-14 font-weight-normal text-light">/</span> 10</span></div>
					</div>
					<div class="col-4 text-center py-5">
						<h5>Unpaid leave</h5>
						<div class="justify-content-center text-center d-flex my-auto"><span class="fs-20 font-weight-semibold">5 <span class="my-auto fs-14 font-weight-normal text-light">/</span> 365</span></div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-xxl-8 col-xl-7 col-lg-12 col-md-12">
			<div class="card">
				<div class="card-header  border-bottom-0">
					<h4 class="card-title">Recent Job Application</h4>
					<div class="card-options">
						<a href="" class="me-0 option-dots text-default" data-bs-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
							<span class="feather feather-more-vertical"></span>
						</a>
						<ul class="dropdown-menu dropdown-menu-end" role="menu">
							<li><a href="javascript:void(0);"><i class="feather feather-eye me-2"></i>View</a></li>
							<li><a href="javascript:void(0);"><i class="feather feather-plus-circle me-2"></i>Add</a></li>
							<li><a href="javascript:void(0);"><i class="feather feather-trash-2 me-2"></i>Remove</a></li>
							<li><a href="javascript:void(0);"><i class="feather feather-download-cloud me-2"></i>Download</a></li>
							<li><a href="javascript:void(0);"><i class="feather feather-settings me-2"></i>More</a></li>
						</ul>
					</div>
				</div>
				<div class="table-responsive recent-jobstable pt-4">
					<div class="btn-task">
						<a href="javascript:void(0);" class="btn btn-primary">New Task<i class="feather feather-plus"></i></a>
					</div>
					<table class="table table-vcenter text-nowrap mb-0" id="assigntask">
						<thead>
							<tr>
								<th class="wd-10p border-bottom-0">S.no</th>
								<th class="wd-15p border-bottom-0">Project Title</th>
								<th class="wd-20p border-bottom-0">Assigned to</th>
								<th class="w-5p border-bottom-0">Due Date</th>
								<th class="wd-15p border-bottom-0">Request Status</th>
								<th class="wd-10p border-bottom-0">Action</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td class="text-start fs-13">1</td>
								<td class="ps-0">
									<div class="d-flex">
										<div class="table_img brround bg-orange-transparent  me-3">
											<img src="../assets/images/photos/html.png" alt="img" class="brround">
										</div>
										<div class="my-auto">
											<h5 class="mb-0 font-weight-medium">Html Business Template</h5>
										</div>
									</div>
								</td>
								<td class="text-start">
									<div class="avatar-list avatar-list-stacked">
										<img class="avatar avatar-md brround" src="../assets/images/users/12.jpg" alt="img">
										<img class="avatar avatar-md brround" src="../assets/images/users/3.jpg" alt="img">
										<img class="avatar avatar-md brround" src="../assets/images/users/2.jpg" alt="img">
										<img class="avatar avatar-md brround" src="../assets/images/users/5.jpg" alt="img">
									</div>
								</td>
								<td class="text-start">19 Feb 2020</td>
								<td class="text-start"><a href="" class="btn btn-outline-success btn-block">Completed</a></td>
								<td class="text-start d-flex">
									<a href="javascript:void(0);" class="action-btns1"><i class="feather feather-mail primary text-primary"></i></a>
									<label class="custom-control custom-checkbox-md">
										<input type="checkbox" class="custom-control-input-success" name="example-checkbox1" value="option1" checked>
										<span class="custom-control-label-md success"></span>
									</label>
								</td>
							</tr>
							<tr>
								<td class="text-start">2</td>
								<td class="ps-0">
									<div class="d-flex">
										<div class="table_img brround bg-pink-transparent  me-3">
											<img src="../assets/images/photos/xd.png" alt="img" class="brround">
										</div>
										<div class="my-auto">
											<h5 class="mb-0 font-weight-medium">Adobe xd Education Template</h5>
										</div>
									</div>
								</td>
								<td class="text-start">
									<div class="avatar-list avatar-list-stacked">
										<img class="avatar avatar-md brround" src="../assets/images/users/4.jpg" alt="img">
										<img class="avatar avatar-md brround" src="../assets/images/users/2.jpg" alt="img">
										<img class="avatar avatar-md brround" src="../assets/images/users/12.jpg" alt="img">
										<img class="avatar avatar-md brround" src="../assets/images/users/15.jpg" alt="img">
									</div>
								</td>
								<td class="text-start">24 Feb 2020</td>
								<td class="text-start"><a href="" class="btn btn-block btn-primary">Accept</a></td>
								<td class="text-start d-flex">
									<a href="javascript:void(0);" class="action-btns1"><i class="feather feather-mail primary text-primary"></i></a>
									<label class="custom-control custom-checkbox-md">
										<input type="checkbox" class="custom-control-input-success" name="example-checkbox2" value="option2">
										<span class="custom-control-label-md success"></span>
									</label>
								</td>
							</tr>
							<tr>
								<td class="text-start">3</td>
								<td class="ps-0">
									<div class="d-flex">
										<div class="table_img brround bg-warning-transparent  me-3">
											<img src="../assets/images/photos/js.png" alt="img" class="brround">
										</div>
										<div class="my-auto">
											<h5 class="mb-0 font-weight-medium">js recent Plugin Updated</h5>
										</div>
									</div>
								</td>
								<td class="text-start">
									<div class="avatar-list avatar-list-stacked">
										<img class="avatar avatar-md brround" src="../assets/images/users/7.jpg" alt="img">
										<img class="avatar avatar-md brround" src="../assets/images/users/8.jpg" alt="img">
										<img class="avatar avatar-md brround" src="../assets/images/users/9.jpg" alt="img">
										<img class="avatar avatar-md brround" src="../assets/images/users/10.jpg" alt="img">
									</div>
								</td>
								<td class="text-start">5 Mar 2020</td>
								<td class="text-start"><a href="" class="btn btn-block btn-primary">Accept</a></td>
								<td class="text-start d-flex">
									<a href="javascript:void(0);" class="action-btns1"><i class="feather feather-mail primary text-primary"></i></a>
									<label class="custom-control custom-checkbox-md">
										<input type="checkbox" class="custom-control-input-success" name="example-checkbox3" value="option3">
										<span class="custom-control-label-md success"></span>
									</label>
								</td>
							</tr>
							<tr>
								<td class="text-start">4</td>
								<td class="ps-0">
									<div class="d-flex">
										<div class="table_img brround bg-pink-transparent  me-3">
											<img src="../assets/images/photos/sass.png" alt="img" class="brround">
										</div>
										<div class="my-auto">
											<h5 class="mb-0 font-weight-medium">Sass Development Program</h5>
										</div>
									</div>
								</td>
								<td class="text-start">
									<div class="avatar-list avatar-list-stacked">
										<img class="avatar avatar-md brround" src="../assets/images/users/5.jpg" alt="img">
										<img class="avatar avatar-md brround" src="../assets/images/users/6.jpg" alt="img">
										<img class="avatar avatar-md brround" src="../assets/images/users/1.jpg" alt="img">
										<img class="avatar avatar-md brround" src="../assets/images/users/12.jpg" alt="img">
									</div>
								</td>
								<td class="text-start">14 Mar 2020</td>
								<td class="text-start"><a href="" class="btn btn-block btn-outline-success">Completed</a></td>
								<td class="text-start  d-flex">
									<a href="javascript:void(0);" class="action-btns1"><i class="feather feather-mail primary text-primary"></i></a>
									<label class="custom-control custom-checkbox-md">
										<input type="checkbox" class="custom-control-input-success" name="example-checkbox4" value="option4" checked>
										<span class="custom-control-label-md success"></span>
									</label>
								</td>
							</tr>
							<tr>
								<td class="text-start">5</td>
								<td class="ps-0">
									<div class="d-flex">
										<div class="table_img brround bg-danger-transparent  me-3">
											<img src="../assets/images/photos/angular.png" alt="img" class="brround">
										</div>
										<div class="my-auto">
											<h5 class="mb-0 font-weight-medium">Angular Development</h5>
										</div>
									</div>
								</td>
								<td class="text-start">
									<div class="avatar-list avatar-list-stacked">
										<img class="avatar avatar-md brround" src="../assets/images/users/6.jpg" alt="img">
										<img class="avatar avatar-md brround" src="../assets/images/users/11.jpg" alt="img">
										<img class="avatar avatar-md brround" src="../assets/images/users/14.jpg" alt="img">
										<img class="avatar avatar-md brround" src="../assets/images/users/1.jpg" alt="img">
									</div>
								</td>
								<td class="text-start">20 Mar 2020</td>
								<td class="text-start"><a href="" class="btn btn-block btn-primary">Accept</a></td>
								<td class="text-start d-flex">
									<a href="javascript:void(0);" class="action-btns1"><i class="feather feather-mail primary text-primary"></i></a>
									<label class="custom-control custom-checkbox-md">
										<input type="checkbox" class="custom-control-input-success" name="example-checkbox5" value="option5">
										<span class="custom-control-label-md success"></span>
									</label>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<div class="col-xxl-4 col-xl-5 col-lg-12 col-md-12 ">
			<div class="card">
				<div class="card-header border-bottom-0">
					<h4 class="card-title">Up Coming Birthdays</h4>
					<div class="card-options">
						<a href="javascript:void(0);" class="btn btn-outline-light">View All</a>
					</div>
				</div>
				<div class="card-body p-3">
					<div class="table-responsive">
						<table class="table text-nowrap mb-0 text-nowrap">
							<tbody>
								<tr>
									<td class="d-flex">
										<img class="w-8 h-8 bradius me-3" src="../assets/images/users/4.jpg" alt="media1">
										<div class="my-auto">
											<a href="javascript:void(0);" class="mb-1 font-weight-semibold fs-16">Jennifer Kerr</a>
											<p class="text-muted fs-13 mb-0">19 Feb 2020 26 Years Old</p>
										</div>
									</td>
									<td class="text-end">
										<a class="text-success d-block fs-16" href="javascript:void(0);">Today</a>
										<a class="btn btn-outline-orange mt-1" href="javascript:void(0);"><i class="fa fa-birthday-cake me-2"></i>Wish Now</a>
									</td>
								</tr>
								<tr>
									<td class="d-flex">
										<img class="w-8 h-8 bradius me-3" src="../assets/images/users/6.jpg" alt="media1">
										<div class="my-auto">
											<a href="javascript:void(0);" class="mb-1 font-weight-semibold fs-16">Rebecca Cameron</a>
											<p class="text-muted fs-13 mb-0">19 Feb 2020 26 Years Old</p>
										</div>
									</td>
									<td class="text-end">
										<a class="text-muted d-block" href="javascript:void(0);">22 Days To Left</a>
									</td>
								</tr>
								<tr>
									<td class="d-flex">
										<img class="w-8 h-8 bradius me-3" src="../assets/images/users/2.jpg" alt="media1">
										<div class="my-auto">
											<a href="javascript:void(0);" class="mb-1 font-weight-semibold fs-16">Jessica Johnston</a>
											<p class="text-muted fs-13 mb-0">19 Feb 2020 26 Years Old</p>
										</div>
									</td>
									<td class="text-end">
										<a class="text-muted d-block" href="javascript:void(0);">22 Days To Left</a>
									</td>
								</tr>
								<tr>
									<td class="d-flex">
										<img class="w-8 h-8 bradius me-3" src="../assets/images/users/7.jpg" alt="media1">
										<div class="my-auto">
											<a href="javascript:void(0);" class="mb-1 font-weight-semibold fs-16">Lily Ball</a>
											<p class="text-muted fs-13 mb-0">19 Feb 2020 26 Years Old</p>
										</div>
									</td>
									<td class="text-end">
										<a class="text-muted d-block" href="javascript:void(0);">22 Days To Left</a>
									</td>
								</tr>
								<tr>
									<td class="d-flex">
										<img class="w-8 h-8 bradius me-3" src="../assets/images/users/12.jpg" alt="media1">
										<div class="my-auto">
											<a href="javascript:void(0);" class="mb-1 font-weight-semibold fs-16">Yadira Acklin</a>
											<p class="text-muted fs-13 mb-0">19 Feb 2020 26 Years Old</p>
										</div>
									</td>
									<td class="text-end">
										<a class="text-muted d-block" href="javascript:void(0);">22 Days To Left</a>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>

<!-- end app-content-->

@section scripts{
	<script>
		$(document).ready(function() {
			$('#myonoffswitch2').prop('checked', true);
			localStorage.setItem('dayonedarkMode', true);
			localStorage.removeItem('dayonelightMode');
			localStorage.removeItem('dayonetransparentMode');

			$('#DashboardCalender').val('@DateTime.Now.ToString("yyyy-MM-dd")')
			// Start the clock
			updateClock();

			var currentDate = new Date(); // Get the current date
			$('#singledaterange').datepicker({
                dateFormat: 'yy M dd',
                autoHide: true
            });
			$('#singledaterange').datepicker('setDate', currentDate)

			$('#chartDate').val('@DateTime.Now.ToString("yyyy-MM-dd")')

			loadStaffYTDAttendance()
			loadStaffMonthlyAttendanceGraph()
			loadStaffYTDHoliday()

			$('#chartDate').change(function () {
				loadStaffYTDAttendance()
				loadStaffMonthlyAttendanceGraph()
				loadStaffYTDHoliday()
            });

		});

		$("#toggleClockButton").click(function() {
			debugger;
			var newText = $(this).text();

			if (newText !== 'am/pm') {
				newText = 'am/pm';
				$(this).text(newText);
			} else {
				newText = '24Hrs';
				$(this).text(newText);
			}
			updateClock()
		});

		function updateClock() {
			var now = new Date();
			var hours = now.getHours();
			var minutes = now.getMinutes();
			var seconds = now.getSeconds();
			var amOrPm = hours >= 12 ? 'pm' : 'am';

			// Add leading zeros to minutes and seconds
			minutes = minutes < 10 ? '0' + minutes : minutes;
			seconds = seconds < 10 ? '0' + seconds : seconds;

			var timeFormat = $("#toggleClockButton").text()

			if (timeFormat == 'am/pm') {
				// Convert to 12-hour format
				hours = hours % 12;
				hours = hours ? hours : 12;
    
				// Update the input field value
				document.getElementById('tpBasic').value = hours + ':' + minutes + ':' + seconds + ' ' + amOrPm;
			}
			else{
				// Update the input field value
				document.getElementById('tpBasic').value = hours + ':' + minutes + ':' + seconds;
			}

			// Schedule the next update after 1 second
			setTimeout(updateClock, 1000);
		  }

		 // function updateClock() {
			//  var now = new Date();
			//  var hours = now.getHours();
			//  var minutes = now.getMinutes();
			//  var seconds = now.getSeconds();

			//  // Add leading zeros to minutes and seconds
			//  minutes = minutes < 10 ? '0' + minutes : minutes;
			//  seconds = seconds < 10 ? '0' + seconds : seconds;

			//  // Update the input field value
			//  document.getElementById('tpBasic').value = hours + ':' + minutes + ':' + seconds;

			//  // Schedule the next update after 1 second
			//  setTimeout(updateClock, 1000);
			//}


		function openApplyLeaveModal() {
			var statusCount = 0;
			var dropdown = $('#LeaveTypeId');
			var ddlHtml = ''
			
			var data = { }

			$.ajax({
				async: false,
					url: "/Dashboard/GetleaveTypeList",
				type: "GET",
				data: data,
				success: function (data) {
					if (data != "") {
						console.log(data)

						for (var i = 0; i < data.listleaveTypes.length; i++) {
							ddlHtml += '<option value="' + data.listleaveTypes[i].leaveTypeId + '">' + data.listleaveTypes[i].title + '</option>'
						}
						dropdown.html(ddlHtml);

						statusCount = data.listleaveTypes.length;
					}
				},
				error: function () 
				{
					statusCount = 0;
					//   toastr.error("Please Fill Required Field");
				}
			})
			if(statusCount > 0){
				debugger
				$("#applyleaves").modal('show')
			}
			
			return status;
		}

		$("#daterange-categories").change(function () {
            debugger;
            var leavecategory = $("#daterange-categories").val();
            if (leavecategory == "multiple") {
                //$("#StartDate").val("");
                //$("#EndDate").val("");
                $("#MultipleDate").attr("hidden", false);
                $("#singledate").attr("class", "col-xl-6 col-md-12 col-lg-12");
                $(".chkbox").addClass("chkboxdisable")
            }
            else {
                var strtdate = $("#StartDate").val();
                $("#EndDate").val(strtdate);
                $("#MultipleDate").attr("hidden", true);
                $("#singledate").attr("class", "col-xl-12 col-md-12 col-lg-12");
                $(".chkbox").removeClass("chkboxdisable")
            }
            DateRangeinDays($("#StartDate").val(), $("#EndDate").val());
        })

        $("#StartDate").change(function () {
            debugger;
            var leavecategory = $("#daterange-categories").val();
            if (leavecategory == "single") {
                var strtdate = $("#StartDate").val();
                $("#EndDate").val(strtdate);
            }
            else {
                $("#EndDate").val("");
            }
            DateRangeinDays($("#StartDate").val(), $("#EndDate").val());
        })

        $("#EndDate").change(function () {
            debugger;
            DateRangeinDays($("#StartDate").val(), $("#EndDate").val());
        })

		function DateRangeinDays(startdate, enddate) {
			debugger
			if (startdate != "" && enddate != "") {

				var startdate = new Date($("#StartDate").val());
				var enddate = new Date($("#EndDate").val());

				// end - start returns difference in milliseconds
				var diff = new Date(enddate - startdate);

				// get days
				var days = parseInt(diff / 1000 / 60 / 60 / 24) + 1;

				$("#SelectedDays").text(days);
			}
		}

		function CheckLeaveApplication() {
            debugger
            var status = true;

            if ($("#LeaveTypeId").val() == "") {

                $.growl.warning({
                    message: "Please Select Leave Type"
                });
                $("#LeaveTypeId").css("border-color", "red");
                status = false;
            }
            else if ($("#StartDate").val() == "" || $("#EndDate").val() == "") {
                $.growl.warning({
                    message: "Please Enter Date Range"
                });

                $("#StartDate").css("border-color", "red");
                $("#EndDate").css("border-color", "red");
                status = false;
            }
            else if ($("#LeaveSubject").val() == "") {
                $.growl.warning({
                    message: "Please Enter Reason"
                });

                $("#LeaveSubject").css("border-color", "red");
                status = false;
            }
            else {
                $("#LeaveTypeId").css("border-color", "#ddd");
                $("#StartDate").css("border-color", "#ddd");
                $("#EndDate").css("border-color", "#ddd");
                $("#LeaveSubject").css("border-color", "#ddd");
            }
            debugger

            var Data = { leavetypeid: $("#LeaveTypeId").val() }
            console.log(Data)
            $.ajax({
                async: false,
                url: "/Leave/CheckLeaveCountOnApply",
                type: "GET",
                data: Data,
                success: function (data) {
                    if (data >0) {
                        debugger
                        var selecteddays = $("#SelectedDays").text();
                        if (selecteddays > data) {
                            // $.growl.warning(b.message);
                            $.growl.warning({
                                message: "Selected days are greater than allowed leaves!!"
                            });
                            status = false;
                        }
                    }
                    else if(data == 0){
                        $.growl.warning({
                            message: "You have Consumed All leaves"
                        });
                        status = false;
                    }
                },
                error: function () {
                    status = false;
                    //   toastr.error("Please Fill Required Field");
                }
            })

            const swalWithBootstrapButtons = Swal.mixin({
                customClass: {
                    confirmButton: 'btn btn-success',
                    cancelButton: 'btn btn-danger'
                },
                buttonsStyling: false
            });

            if (status) {
                swalWithBootstrapButtons.fire({
                    title: 'Are you sure?',
                    text: "You won't be able to revert this!",
                    icon: 'warning',
                    showCancelButton: true,
                    cancelButtonText: 'No, cancel!',
                    confirmButtonText: 'Yes, Save it!',
                    timer: 30000,
                    reverseButtons: true
                }).then((result) => {
                    if (result.isConfirmed) {
						PostLeaveApplication()
                    }
                    else if (
                        result.dismiss === Swal.DismissReason.cancel
                    ) {
                        swalWithBootstrapButtons.fire(
                            'Cancelled',
                            'Your record is safe :)',
                            'error'
                        )
                    }
                });
            }
        }

		function PostLeaveApplication() {
			var status = false;
			debugger

			var Data = { 
				leaveTypeId: $("#LeaveTypeId").val(),
				startDate: $("#StartDate").val(),
				endDate: $("#EndDate").val(),
				leaveSubject: $("#LeaveSubject").val(),
				markAsHalfLeave: $("#MarkAsHalfLeave").prop("checked"),
				markAsShortLeave: $("#MarkAsShortLeave").prop("checked")
			}
			console.log(Data)
			$.ajax({
				async: false,
				url: "/Dashboard/LeaveCreateOrUpdate",
				type: "GET",
				data: Data,
				success: function (data) {
					if (data != "") {
						console.log(data)
						debugger
						status = data.success;
						var url = "/Dashboard/StaffDashboard";
						window.location.href = url;
					}
				},
				error: function () 
				{
					status = false;
					//   toastr.error("Please Fill Required Field");
				}
			})
			return status;
		}

		function loadStaffMonthlyAttendanceGraph() {
			var MonthName = []
			var PresentCount = []
			var AbsentCount = []
			var dateValue = $('#chartDate').val()
			var requestData = { currentDate: dateValue }

			makeAjaxRequest("/Dashboard/StaffMonthlyAttendance", 'GET', requestData, false, function (response) {
				if (response != null) {
					for (var i = 0; i < response.length; i++) {
						MonthName.push(response[i].MonthName);
						PresentCount.push(response[i].PresentCount);
						var totalAbsent = response[i].NonPaidLeaveCount + response[i].AbsentCount
						AbsentCount.push(totalAbsent);
					}
				}
				}, function (errorStatus) {
					console.log('Error:', errorStatus)
			});

			/** STACKED BAR CHART **/
			var ctx6 = document.getElementById('chartStackedAttendance');
			new Chart(ctx6, {
				type: 'bar',
				data: {
					labels: MonthName, // ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
					datasets: [{
						data: PresentCount, //[14, 12, 34, 25, 24, 20],
						backgroundColor: '#fe7f00',
						borderWidth: 1,
						fill: true
					}, {
						data: AbsentCount, // [14, 12, 34, 25, 24, 20],
						backgroundColor:  '#3366ff',
						borderWidth: 1,
						fill: true
					}]
				},
				options: {
					maintainAspectRatio: false,

					legend: {
						display: false,
						labels: {
							display: false
						}
					},
					scales: {
						yAxes: [{
							stacked: true,
							ticks: {
								beginAtZero: true,
								fontSize: 11,
								fontColor: "#b4b7c5",
							},
							gridLines: {
								color: 'rgba(180, 183, 197, 0.4)'
							}
						}],
						xAxes: [{
							barPercentage: 0.5,
							stacked: true,
							ticks: {
								fontSize: 11,
								fontColor: "#b4b7c5",
							},
							gridLines: {
								color: 'rgba(180, 183, 197, 0.4)'
							}
						}]
					}
				}
			});

		}

		function loadStaffYTDAttendance() {
			var dateValue = $('#chartDate').val()
			var requestData = { currentDate: dateValue }

			makeAjaxRequest("/Dashboard/Staff_YTDAttendance", 'GET', requestData, false, function (response) {
				if (response != null) {
					$('#YTDPresentCount').text(response[0].YTDPresentCount)
					$('#MTDPaidLeaveCount').text(response[0].MTDPaidLeaveCount)
					$('#TotalAbsentCount').text(response[0].TotalAbsentCount)
				}
			}, function (errorStatus) {
				console.log('Error:', errorStatus)
			});
		}
	
		function loadStaffYTDHoliday() {
			var dateValue = $('#chartDate').val()
			var requestData = { currentDate: dateValue }

				makeAjaxRequest("/Dashboard/Staff_UpComingHolidays", 'GET', requestData, false, function (response) {
				if (response != null) {
					var htmlHoliday = ''
					for (var i = 0; i < response.length; i++) {
						//if (i = response.length - 1) {
						//	htmlHoliday += ' <div class="mb-5"> '
						//}
						//else{
						//	htmlHoliday += ' <div class="mb-5"> '
						//}
						htmlHoliday += ' <div class="mb-5"> '
						htmlHoliday += ' 	<div class="d-flex comming_holidays calendar-icon icons"> '
						htmlHoliday += ' 		<span class="date_time ' + response[i].SpanClass + ' bradius me-3"> '
						htmlHoliday += ' 			<span class="date fs-20"> ' + response[i].HolidayDayNumber + '</span>  '
						htmlHoliday += ' 			<span class="month fs-13">' + response[i].HolidayShortMonthName + '</span> '
						htmlHoliday += ' 		</span> '
						htmlHoliday += ' 		<div class="me-3 mt-0 mt-sm-1 d-block"> '
						htmlHoliday += ' 			<h6 class="mb-1 font-weight-semibold">' + response[i].HolidayType + '</h6> '
						htmlHoliday += ' 			<span class="clearfix"></span> '
						htmlHoliday += ' 			<small>' + response[i].DayWithTitle + '</small> '
						htmlHoliday += ' 		</div> '
						htmlHoliday += ' 		<p class="float-end text-muted  mb-0 fs-13 ms-auto bradius my-auto">' + response[i].DaysLeft + ' days left</p> '
						htmlHoliday += ' 	</div> '
						htmlHoliday += ' </div> '
					}

					$("#holidaysCard").html(htmlHoliday)
				}
			}, function (errorStatus) {
				console.log('Error:', errorStatus)
			});
		}

	</script>
}